#!/bin/bash

cd ../

# Amber sigma K Cl
sig_POT_array=(0.30379600  0.30318805  0.30258011  0.30197216  0.30136422  0.30075627  0.30019342  0.29963056  0.29906771  0.29850485  0.29794200  0.29736392  0.29678585  0.29620777  0.29562970  0.29505162  0.29437078  0.29368994  0.29300910  0.29232826  0.29164742  0.29091019  0.29017297  0.28943574  0.28869852  0.28796129  0.28715762  0.28635394  0.28555027  0.28474659  0.28394292  0.28308173  0.28222053  0.28135934  0.28049814  0.27963695)
sig_CLA_array=(0.44776600  0.44722335  0.44668070  0.44613805  0.44559540  0.44505275  0.44443139  0.44381004  0.44318868  0.44256733  0.44194597  0.44141226  0.44087856  0.44034485  0.43981115  0.43927744  0.43865405  0.43803066  0.43740727  0.43678388  0.43616049  0.43547221  0.43478392  0.43409564  0.43340735  0.43271907  0.43197204  0.43122501  0.43047799  0.42973096  0.42898393  0.42810378  0.42722363  0.42634349  0.42546334  0.42458319)

base=$PWD
for i in {0..35}; do
    j=$(echo "scale=2; 1.00 - $i / 100" | bc)
    sigma_POT=${sig_POT_array[$i]}
    sigma_CLA=${sig_CLA_array[$i]}
    echo $i $j $sigma_POT $sigma_CLA
    cd $base
    cp tmp $i -r
    cd $i
    
    sed -i "s/K_CHARGE/$j/g" ions.itp
    sed -i "s/SIGMA_POT/$sigma_POT/g" ions_at_type.itp
    sed -i "s/SIGMA_CLA/$sigma_CLA/g" ions_at_type.itp
    touch plumed.dat
done

cd $base
python gen_itp_AmberR.py

