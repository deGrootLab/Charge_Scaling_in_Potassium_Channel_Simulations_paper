#!/bin/bash

cd ../

# Charmm sigma POT CLA
sig_POT_array=(0.31426452  0.31370893  0.31315333  0.31259774  0.31204214  0.31148655  0.31087542  0.31026430  0.30965317  0.30904205  0.30843092  0.30780065  0.30717038  0.30654011  0.30590984  0.30527957  0.30460951  0.30393944  0.30326938  0.30259931  0.30192925  0.30112750  0.30032574  0.29952399  0.29872223  0.29792048  0.29716759  0.29641469  0.29566180  0.29490890  0.29415601  0.29326681  0.29237760  0.29148840  0.29059919  0.28970999)
sig_CLA_array=(0.40446802  0.40404701  0.40362600  0.40320499  0.40278398  0.40236297  0.40189908  0.40143519  0.40097131  0.40050742  0.40004353  0.39953266  0.39902179  0.39851092  0.39800005  0.39748918  0.39707871  0.39666824  0.39625778  0.39584731  0.39543684  0.39478710  0.39413736  0.39348762  0.39283788  0.39218814  0.39157835  0.39096856  0.39035877  0.38974898  0.38913919  0.38847510  0.38781101  0.38714693  0.38648284  0.38581875)

base=$PWD
for i in {0..35}; do
    j=$(echo "scale=2; 1.00 - $i / 100" | bc)
    sigma_POT=${sig_POT_array[$i]}
    sigma_CLA=${sig_CLA_array[$i]}
    echo $i $j $sigma_POT $sigma_CLA
    cd $base
    cp tmp $i -r
    cd $i
    
    sed -i "s/K_CHARGE/$j/g" ions.itp
    sed -i "s/SIGMA_POT/$sigma_POT/g" ions_at_type.itp
    sed -i "s/SIGMA_CLA/$sigma_CLA/g" ions_at_type.itp
    touch plumed.dat
done

cd $base
python gen_itp_Charmm.py

